9th Day of the Project! 

### Things to Do Today
 
 1. S3 vs RDS - 
     [] what to use for storage and how ? 
     [] how to use it with Docker? 
     [] how to run forever.js 
     
 2. InfluxDB + Grafana + k6 for testing 

### Scaling Your Architecture Lecture Notes (Josh Elder 1:30 pm)

1. What is an architecture? blueprint which is based on decision which can be costly or difficult to change once implemented.
2. With microservice architecture, we can scale individually. 

SCALING: Vertical or Horizontal 

1. What and Why Scale? to handle uptick increasing numbers of users, to handle traffic
2. Resources allocated use go up when there is uptick of users, and users start experiencing degradation - for example: slowness of website
3. 100ms of increased response can drive users away, there providing optimal user experience is important. 
4. IBM, google, cloud services providers auto-scaling. https://aws.amazon.com/autoscaling/

LOAD BALANCER

1. is a traffic cop to reqs coming into your app, routes request (round robin type of situation)
2. is a server application
3. can be written in javascript
4. js is faster type of slow language (faster than python but not super fast..)
5. loadbalancer are apps designed to be extremely performant, mainly written in C because C is super fast
6. e.g nginx(engine-x) is an example of loadbalancer, can be used as a filesystem, proxy not just load balancer
7. LoadBalancing Strategies: 
     [] IP Hash - client sends a req to LD, LD hashes that IP, sends that to one of the instances of the servers
     [] Round Robin
     [] Docker swarm (also uses a loadbalancer) - also can be used - relatively easy to scale an app

### Pros and Cons of Performing calculations in SQL vs your Application

https://stackoverflow.com/questions/7510092/what-are-the-pros-and-cons-of-performing-calculations-in-sql-vs-in-your-applica


### How to Delete a branch in github

To delete branch: 
1. git branch -d <branch> (Deletes locally) 
2. git push origin --delete <branch> (Deletes remotely)

### Before Optimization

###### GET request /reviews 

product_id = 1000010![Screen Shot 2021-03-23 at 4 53 12 PM](https://user-images.githubusercontent.com/5890251/112233778-445c9300-8bf8-11eb-8f71-47fede71a367.png)
 (last 10% of the table) and 500,005 (middle), 5000(beginning)
 

![Screen Shot 2021-03-23 at 4 35 23 PM](https://user-images.githubusercontent.com/5890251/112232425-c7301e80-8bf5-11eb-8495-b8de841621e1.png)

![Screen Shot 2021-03-23 at 4 37 23 PM](https://user-images.githubusercontent.com/5890251/112232606-1c6c3000-8bf6-11eb-895b-a00c55c26913.png)

![Screen Shot 2021-03-23 at 4 39 03 PM](https://user-images.githubusercontent.com/5890251/112232729-4e7d9200-8bf6-11eb-9c10-08fe9c9cbe5a.png)

![Screen Shot 2021-03-23 at 4 40 07 PM](https://user-images.githubusercontent.com/5890251/112232804-73720500-8bf6-11eb-8adc-93a091f8d7b8.png)

![Screen Shot 2021-03-23 at 4 41 28 PM](https://user-images.githubusercontent.com/5890251/112232945-b7fda080-8bf6-11eb-922d-fff7b3ebb9d4.png)

![Screen Shot 2021-03-23 at 4 42 51 PM](https://user-images.githubusercontent.com/5890251/112232989-d2377e80-8bf6-11eb-9a39-15ab4901ff8c.png)

###### GET request /reviews/meta

product_id = 1000010 (last 10% of the table) and 500,005 (middle), 5000(beginning)

![Screen Shot 2021-03-23 at 4 44 30 PM](https://user-images.githubusercontent.com/5890251/112233173-280c2680-8bf7-11eb-84ac-d16920d0f967.png)

![Screen Shot 2021-03-23 at 4 46 51 PM](https://user-images.githubusercontent.com/5890251/112233292-69043b00-8bf7-11eb-8268-cd7500fa645c.png)

![Screen Shot 2021-03-23 at 4 48 05 PM](https://user-images.githubusercontent.com/5890251/112233433-af599a00-8bf7-11eb-8bc1-e2a61937d87f.png)

![Screen Shot 2021-03-23 at 4 48 56 PM](https://user-images.githubusercontent.com/5890251/112233441-b1bbf400-8bf7-11eb-9ff3-68ad2157cbe2.png)

![Screen Shot 2021-03-23 at 4 49 59 PM](https://user-images.githubusercontent.com/5890251/112233541-e0d26580-8bf7-11eb-9266-7526e715366c.png)

##### POST request /reviews

![Screen Shot 2021-03-23 at 4 50 22 PM](https://user-images.githubusercontent.com/5890251/112233550-e4fe8300-8bf7-11eb-9f69-27121aea2000.png)

![Screen Shot 2021-03-23 at 4 54 23 PM](https://user-images.githubusercontent.com/5890251/112233850-6eae5080-8bf8-11eb-8116-c0d863a38a99.png)



Optimization Suggestion 
1. Binary Search 
2. Caching 
3. Load Balancer 
4. Understanding Why use Docker and why it's powerful? 
5. Two instances ? or One? Stress Test (k6, 


### Deploying Data Files (csvs onto s3 storage system) in AWS
On AWS 

1. Set up a new s3 instance. 
2. Upload your csv files from your local machine to s3. 
3. Set up IAM. 
4. Follow this guide. 
![Screen Shot 2021-03-23 at 10 04 59 PM](https://user-images.githubusercontent.com/5890251/112258528-e2b21e00-8c23-11eb-9124-1119438f7cd7.png)
![Screen Shot 2021-03-23 at 10 05 09 PM](https://user-images.githubusercontent.com/5890251/112258536-e645a500-8c23-11eb-9f5f-570f35b3b0e9.png)
![Screen Shot 2021-03-23 at 10 05 17 PM](https://user-images.githubusercontent.com/5890251/112258543-e8a7ff00-8c23-11eb-8e65-c4448b37a050.png)

Once you have set up IAM and S3, now on your ubuntu instance, download AWS CLI

1. ```sudo apt  install awscli   # version 1.18.69-1ubuntu0.20.04.1```

![Screen Shot 2021-03-23 at 10 07 13 PM](https://user-images.githubusercontent.com/5890251/112258704-2b69d700-8c24-11eb-927d-de4bf19da3fb.png)

2. Now run, ```aws s3 ls s3://sdcscv``` to download. 
3. ```aws s3 ls``` to list all the downloaded folders. 
4. ```aws s3 ls s3://sdcscv --recursive``` to list all your files. 

![Screen Shot 2021-03-23 at 10 09 04 PM](https://user-images.githubusercontent.com/5890251/112258849-708e0900-8c24-11eb-90cf-2ba2b1fc51bd.png)

(https://docs.aws.amazon.com/cli/latest/reference/s3/ls.html)

